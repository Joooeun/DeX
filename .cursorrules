# Cursor AI 규칙 설정

## 프로젝트 개요
- Windmill: Java Spring MVC 기반의 SQL 템플릿 관리 시스템
- Tomcat 9 서버 사용
- JSP + JavaScript/jQuery 프론트엔드
- PostgreSQL 데이터베이스

## 코딩 스타일 및 규칙

### Java
- Spring MVC 패턴 준수
- Service 계층에서 비즈니스 로직 처리
- Controller는 요청/응답 처리만
- @Transactional 어노테이션 적절히 사용
- 로깅은 SLF4J + Logback 사용

### JavaScript/jQuery
- jQuery 기반 DOM 조작
- 이벤트 위임 사용 권장
- 전역 변수 최소화
- 함수명은 camelCase
- 상수는 UPPER_SNAKE_CASE

### JSP
- JSP EL 표현식 사용 시 JavaScript 템플릿 리터럴에서는 \${} 이스케이프 필수
- 화면 요소는 미리 그려놓고 시작하는 방식 선호
- 동적 append보다는 기존 요소 show/hide 방식 선호

### ID 관리 규칙
- 연결 ID는 콤마로 구분 (예: "pg,pgmac")
- HTML ID는 언더스코어로 변환 (예: "pg_pgmac")
- ID 변환은 전용 함수 사용:
  - connectionIdToTabId()
  - tabIdToConnectionId()
  - connectionIdToEditorId()
  - editorIdToConnectionId()

### 데이터베이스
- 테이블명은 UPPER_SNAKE_CASE
- 컬럼명은 UPPER_SNAKE_CASE
- 복합 키 사용 시 쉼표로 구분된 연결 ID 지원

### 에러 처리
- 사용자 친화적 메시지 표시
- 서버 로그에 상세 에러 정보 기록
- AJAX 실패 시 toast 메시지로 알림

### 성능 고려사항
- 불필요한 API 호출 최소화
- 클라이언트 사이드 캐싱 활용
- 이벤트 리스너 중복 등록 방지

## 특별 주의사항
- SQLTemplate.jsp는 복잡한 파일이므로 수정 시 충돌 가능성 고려
- 하나 수정하면 다른 부분에 영향 줄 수 있으므로 전체적인 영향도 분석 필수
- 백업 후 수정 권장
- 단계별로 나누어 수정 진행

## 개발 절차
- 개발 시작 전 반드시 전체 계획을 먼저 설명하고 사용자 승인 후 진행
- 큰 작업은 단계별로 나누어 각 단계마다 사용자 승인 받고 진행
- 각 단계 완료 후 다음 단계 진행 전 사용자에게 확인 요청
- 사용자가 명시적으로 승인하기 전까지는 코드 수정하지 않음
- 계획 변경이 필요한 경우 사용자에게 먼저 설명하고 승인 받기

## 배포 방식
- ROOT.war 파일 생성 후 Tomcat webapps 디렉토리에 수동 배치
- 단계별 순차적 진행 선호
