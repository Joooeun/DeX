## 대시보드 스케줄러 설계
1. rootpath, 커넥션 풀 초기화 완료후 시작
2. 디비연결정보 테이블에서 활성화, 모니터링 여부 true인 목록 조회(활성화된 DB 연결)
3. 활성화된 디비연결목록 연결 테스트 및 결과 저장(디비연결상태목록)
4. 차트 설정 조회 (SYSTEM_CONFIG 테이블의 DASHBOARD_CHART_CONFIG 컬럼에서 JSON 형태로 저장된 차트 설정 조회)
5. 차트 설정 JSON 파싱하여 차트 목록 추출
6. 차트 목록을 순회하며 각 차트별 스케줄러 생성 (스케줄러 시간은 템플릿 REFRESH_TIMEOUT으로)
7. 각 스케줄러가 실행될 때마다 해당 차트의 템플릿을 디비연결상태목록에서 연결상태 정상인 DB 연결에 대해서만 실행, 캐시에 차트 정보가 있다면 결과가 에러이면 넘어감
8. SQL 템플릿 실행 결과를 차트 데이터 캐시에 저장 (차트ID_연결ID 형태의 키로)
9. 차트 설정이 변경되면 스케줄러를 재시작하여 새로운 설정 반영
10. 서버 종료 시 모든 스케줄러 정리
11. 에러 상태 리셋 기능으로 제거된 차트를 다시 활성화
12. 차트 추가/삭제 시 스케줄러 동적 생성/제거, 스케줄러 중복 실행 방지

## 대시보드 화면 설계

### 환경설정 화면 (SystemConfig.jsp)
1. 차트 설정 관리 섹션
   - 차트 추가/삭제 기능
   - 차트 순서 조정 (위/아래 화살표)
   - 최대 12개 제한
2. 차트 설정 테이블
   - 템플릿 선택 (Select2 드롭다운)
   - 차트 타입 선택 (도넛/텍스트/게이지/가로막대)
   - 삭제 버튼
3. 템플릿 목록 관리
   - 템플릿 목록 캐싱
   - Select2 초기화
   - 템플릿 검색 기능
4. 설정 저장 및 관리
   - 차트 설정 저장 버튼
   - 에러 상태 리셋 버튼
   - 설정 변경 시 스케줄러 재시작

### 대시보드 메인 화면 (Dashboard.jsp)
1. 연결상태 카드 + 차트정보 통합 조회(10초간격)
   - 연결상태와 차트 데이터를 한번에 조회
   - API 호출 횟수 감소 (2회 → 1회)
   - 연결 상태와 차트 데이터 동기화
2. 신호등 시스템
   - 차트 데이터 상태에 따른 신호등 색상 변경
   - 연결별 신호등 동적 생성
   - 실시간 상태 업데이트
3. 동적 차트 렌더링
   - 서버 데이터로 차트 HTML 동적 생성
   - 차트 타입별 렌더링 (도넛/텍스트/게이지/가로막대)
   - Chart.js로 차트 초기화
4. 메뉴 실행 기록 (기존 로직 유지)
   - 기존 메뉴 실행 기록 로직 그대로 사용

## API 설계

### 통합 API 설계
1. 연결상태 + 차트정보 통합 조회 API
   - 응답 구조 설계
   - 에러 처리 방안
2. API 응답 구조 설계
   ```json
   {
     "success": true,
     "connections": [
       {
         "connectionId": "pg_mac",
         "status": "ONLINE",
         "charts": {
           "chart_1": { "result": [...], "success": true },
           "chart_2": { "result": [...], "success": true }
         }
       }
     ]
   }
   ```
3. API 엔드포인트 설계
   - `/Dashboard/getIntegratedData` - 통합 데이터 조회
   - `/Dashboard/getChartConfig` - 차트 설정 조회
   - `/SystemConfig/saveChartConfig` - 차트 설정 저장
4. 에러 처리 방안
   - 연결별 에러 처리
   - 차트별 에러 처리
   - 전체 시스템 에러 처리
5. 차트별 에러 처리 상세
   - 스케줄러 실행 시 차트별 성공/실패 상태 저장
   - 다음 스케줄러 실행 시 실패한 차트는 if문으로 건너뛰기
   - 에러 상태 리셋 시 조회 성공 여부 초기화
6. 성공/실패 상태 저장 구조
   - 차트별 성공/실패 상태를 메모리에 저장
   - 차트ID_연결ID 형태의 키로 상태 관리
   - 상태 변경 시 로그 기록
7. 스케줄러 실행 로직
   - 각 차트 실행 전 성공/실패 상태 확인
   - 실패한 차트는 건너뛰고 다음 차트 실행
   - 성공한 차트만 데이터 업데이트
8. 에러 상태 리셋 로직
   - 모든 차트의 성공/실패 상태 초기화
   - 다음 스케줄러 실행 시 모든 차트 다시 시도
   - 사용자에게 리셋 완료 메시지 표시
