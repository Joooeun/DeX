<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration>
<configuration>
	<appender name="info"
		class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			<pattern>▶ %green(%d{yyyy-MM-dd HH:mm:ss.SSS}) %highlight(%5level) - %yellow(%msg%n)</pattern>
		</encoder>
	</appender>

	<appender name="info2"
		class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			<pattern>▶ %5level [%d{yyyy-MM-dd HH:mm:ss.SSS}] %msg%n</pattern>
		</encoder>
	</appender>

	<appender name="console"
		class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			<pattern>▶ %-5level %d{HH:mm:ss.SSS} [%class{0}][%method:%line] - %msg%n</pattern>
		</encoder>
	</appender>

	<appender name="INFO_LOG"
		class="ch.qos.logback.core.rolling.RollingFileAppender">

		<file>../logs/info.log</file> <!-- 파일을 저장할 경로를 정한다 -->
		<filter class="ch.qos.logback.classic.filter.LevelFilter">
			<level>INFO</level>
			<onMatch>ACCEPT</onMatch> <!-- 해당 레벨만 기록한다. -->
			<onMismatch>DENY</onMismatch> <!-- 다른 수준의 레벨은 기록하지 않는다.(상위 레벨도 기록 안함), 상위 수준의 레벨에 대한 기록을 원하면 ACCEPT 로 하면 
				기록된다. -->
		</filter> <!-- 레벨별 필터링이 필요없을 경우 filter class 관련된 부분을 삭제하면 됨 -->
		<encoder>
			<pattern>[%d{yyyy-MM-dd HH:mm:ss.SSS}] %msg%n</pattern> <!-- 해당 패턴 네이밍으로 현재 로그가 기록됨 -->
		</encoder>
		<rollingPolicy
			class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<!-- .gz,.zip 등을 넣으면 자동 일자별 로그파일 압축 -->
			<fileNamePattern>${LOG_PATH}/${LOG_FILE_NAME}.%d{yyyy-MM-dd}_%i.log</fileNamePattern>
			<!-- 파일 크기 지정할떄 사용 -->
			<timeBasedFileNamingAndTriggeringPolicy
				class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP">
				<!-- 파일당 최고 용량 kb, mb, gb -->
				<maxFileSize>10MB</maxFileSize>
			</timeBasedFileNamingAndTriggeringPolicy>
			<!-- 일자별 로그파일 최대 보관주기(~일), 해당 설정일 이상된 파일은 자동으로 제거 -->
			<!-- <maxHistory>30</maxHistory> -->
			<!--<MinIndex>1</MinIndex> <MaxIndex>10</MaxIndex> -->
		</rollingPolicy>
	</appender>



	<root level="info">
		<appender-ref ref="info2" />
		<appender-ref ref="INFO_LOG" />
	</root>

	<logger name="org.springframework" level="error"
		additivity="false">
		<appender-ref ref="console" />
	</logger>
	<logger name="kr.Windmill" level="info" additivity="false">
		<appender-ref ref="info" />
	</logger>
</configuration>
